<?xml version="1.0" encoding="UTF-8"?>
<svg xmlns="http://www.w3.org/2000/svg" width="1200" height="600" viewBox="0 0 1200 600">
  <style>
    .box{fill:#0b1220;stroke:#1e293b;stroke-width:2;rx:10;}
    .box-light{fill:#0f1724;stroke:#111827;stroke-width:2;rx:10;}
    .text{fill:#e6eef8;font-family:Inter, Arial, sans-serif;font-size:16px}
    .title{fill:#cfe8ff;font-weight:700;font-size:20px}
    .arrow{stroke:#9aa0a6;stroke-width:2;marker-end:url(#arrow)}
  </style>
  <defs>
    <marker id="arrow" markerWidth="10" markerHeight="10" refX="8" refY="5" orient="auto">
      <path d="M0 0 L10 5 L0 10 z" fill="#9aa0a6"/>
    </marker>
  </defs>

  <rect x="40" y="40" width="1120" height="80" class="box-light" rx="12"/>
  <text x="60" y="92" class="title">Architecture pattern â€” Monolithic 3-tier / Serverless-friendly</text>

  <!-- Presentation -->
  <rect x="80" y="160" width="320" height="120" class="box" rx="12"/>
  <text x="110" y="200" class="text">Presentation</text>
  <text x="110" y="224" class="text">React SPA (Vite)</text>
  <text x="110" y="246" class="text">Static build served by CDN</text>

  <!-- Application -->
  <rect x="440" y="160" width="320" height="120" class="box" rx="12"/>
  <text x="470" y="200" class="text">Application</text>
  <text x="470" y="224" class="text">Express server (server/index.js)</text>
  <text x="470" y="246" class="text">Serverless functions (optional)</text>

  <!-- Data -->
  <rect x="800" y="160" width="320" height="120" class="box" rx="12"/>
  <text x="830" y="200" class="text">Data Layer</text>
  <text x="830" y="224" class="text">Supabase (Postgres, Auth, Storage)</text>
  <text x="830" y="246" class="text">SQL migrations in sql/*.sql</text>

  <!-- arrows -->
  <line x1="400" y1="220" x2="440" y2="220" class="arrow"/>
  <line x1="760" y1="220" x2="800" y2="220" class="arrow"/>

  <!-- Notes -->
  <text x="60" y="340" class="text">Notes:</text>
  <text x="80" y="364" class="text">- Client uses VITE_SUPABASE_ANON_KEY to call Supabase directly for many operations.</text>
  <text x="80" y="386" class="text">- server/index.js uses SUPABASE_SERVICE_ROLE_KEY for privileged ops (search, admin uploads).</text>
  <text x="80" y="408" class="text">- Stronger duplication prevention should be done at DB (unique constraint / session_key).</text>
</svg>